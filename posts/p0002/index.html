<!DOCTYPE html>
<html lang="zh">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Kulics">
    <meta name="description" content="Kulics&#39; personal website">
    <meta name="keywords" content="blog,developer,personal">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Out of the box, back to intuition - Feel Lang Design"/>
<meta name="twitter:description" content="Design background When I was developing a multi-platform XyKey a few years ago, I didn&rsquo;t have the option because the cross-platform solution wasn&rsquo;t mature enough at the time Instead of a cross-platform implementation, I chose to develop for each platform using the official language, for which I approached Java/ Kotlin (Android), Swift/OC (iOS), C# (UWP). I also work on blockchain technology, and the existing mainstream blockchain solutions also make extensive use of JS &#43; Go&rsquo;s Combining front and back-end product development."/>

    <meta property="og:title" content="Out of the box, back to intuition - Feel Lang Design" />
<meta property="og:description" content="Design background When I was developing a multi-platform XyKey a few years ago, I didn&rsquo;t have the option because the cross-platform solution wasn&rsquo;t mature enough at the time Instead of a cross-platform implementation, I chose to develop for each platform using the official language, for which I approached Java/ Kotlin (Android), Swift/OC (iOS), C# (UWP). I also work on blockchain technology, and the existing mainstream blockchain solutions also make extensive use of JS &#43; Go&rsquo;s Combining front and back-end product development." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kulics.github.io/posts/p0002/" />
<meta property="article:published_time" content="2020-07-18T20:24:28+08:00" />
<meta property="article:modified_time" content="2020-07-18T20:24:28+08:00" />


    
      <base href="https://kulics.github.io/posts/p0002/">
    
    <title>
  Out of the box, back to intuition - Feel Lang Design · kulics
</title>

    
      <link rel="canonical" href="https://kulics.github.io/posts/p0002/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://kulics.github.io/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="https://kulics.github.io/css/custom.css" />
    

    
    
    <link rel="icon" type="image/png" href="https://kulics.github.io/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://kulics.github.io/img/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.73.0" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://kulics.github.io/">
      kulics
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://kulics.github.io/posts/">Posts</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://kulics.github.io/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://kulics.github.io/projects/">Projects</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Out of the box, back to intuition - Feel Lang Design</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2020-07-18T20:24:28&#43;08:00'>
                July 18, 2020
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              
            </span>
          </div>
          
          
        </div>
      </header>

      <div>
        <h2 id="design-background">Design background</h2>
<p>When I was developing a multi-platform XyKey a few years ago, I didn&rsquo;t have the option because the cross-platform solution wasn&rsquo;t mature enough at the time Instead of a cross-platform implementation, I chose to develop for each platform using the official language, for which I approached Java/ Kotlin (Android), Swift/OC (iOS), C# (UWP). I also work on blockchain technology, and the existing mainstream blockchain solutions also make extensive use of JS + Go&rsquo;s Combining front and back-end product development.</p>
<p>After switching back and forth between languages, I became interested in the grammatical differences in expressing the same functionality in different languages, which led to an exploration of grammatical design, which led to the birth of Feel.</p>
<h2 id="language-design-problem-number-one">Language design problem number one</h2>
<p>In many languages, there is more than one way to express a function.</p>
<p><strong>Do we need to design different syntaxes for the same requirements?</strong></p>
<p>Below are some examples of functions in the languages I&rsquo;ve used, all eg are functions.</p>
<p>Go: Most of the time functions are declared with func, it&rsquo;s one of the more consistent design, but in interface still uses a different way of describing things.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="font-weight:bold">func</span> eg1(x <span style="">int</span>) <span style="">int</span> {
	<span style="font-weight:bold">return</span> 1
}

<span style="font-weight:bold">var</span> eg2 = <span style="font-weight:bold">func</span>(x <span style="">int</span>) <span style="">int</span> {
	<span style="font-weight:bold">return</span> 1
}

<span style="font-weight:bold">type</span> foo <span style="font-weight:bold">struct</span> {
	eg3 <span style="font-weight:bold">func</span>(<span style="">int</span>) <span style="">int</span>
}

<span style="font-weight:bold">type</span> bar <span style="font-weight:bold">interface</span> {
	eg4(<span style="">int</span>) <span style="">int</span>
}
</code></pre></div><p>C#: uses C-style descriptions most of the time, but uses counterintuitive generic types in function types. And the Lambda syntax doesn&rsquo;t see the connection to functions.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="">int</span> eg1(<span style="">int</span> x) 
{
    Func&lt;<span style="">int</span>,<span style="">int</span>&gt; eg2 = (<span style="">int</span> x) =&gt; 
    {
        <span style="font-weight:bold">return</span> 1;
    };
    <span style="font-weight:bold">return</span> 1;
}

<span style="font-weight:bold">interface</span> foo 
{
    <span style="">int</span> eg3(<span style="">int</span> x);
}

Action&lt;<span style="">int</span>&gt; eg4;
</code></pre></div><p>Kotlin: function definition, function type, and lambda are the three styles.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="font-weight:bold">fun</span> eg1(x: Int): Int {
    <span style="font-weight:bold">val</span> eg2: (Int) -&gt; Int = { i -&gt;
        1
    }
    <span style="font-weight:bold">return</span> 1
}

<span style="font-weight:bold">val</span> eg3 = <span style="font-weight:bold">fun</span>(x: Int): Int {
    <span style="font-weight:bold">return</span> 1
}

<span style="font-weight:bold">interface</span> <span style="font-weight:bold">name</span> {
    <span style="font-weight:bold">fun</span> eg4(x: Int)
    <span style="font-weight:bold">val</span> eg5: (Int) -&gt; Unit
}
</code></pre></div><p>Swift: The better thing about swift is that function definitions and function types are represented using the same arrows, but in the Lambda, however, uses in for partitioning.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="font-weight:bold">func</span> eg1(x: Int) -&gt; Int {
    <span style="font-weight:bold">let</span> eg2: (Int) -&gt; Int = { i <span style="font-weight:bold">in</span>
        <span style="font-weight:bold">return</span> 1
    }
    <span style="font-weight:bold">return</span> 1
}

<span style="font-weight:bold">protocol</span> <span style="font-weight:bold">name</span> {
    <span style="font-weight:bold">func</span> eg3(x: Int)
}

<span style="font-weight:bold">var</span> eg4: (Int) -&gt; ()
</code></pre></div><p>Bind a name to a resource, also can be written in many different ways.</p>
<p>Below are some of the language identifier representations I&rsquo;ve used, all eg is an identifier of a resource.</p>
<p>Swift: Using different prefixes for different types of bind identifiers is one of the better practices.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="font-weight:bold">var</span> eg1 = 1

<span style="font-weight:bold">let</span> eg2 = 1

<span style="font-weight:bold">func</span> eg3() {}

<span style="font-weight:bold">class</span> <span style="font-weight:bold">eg4</span> {}

<span style="font-weight:bold">protocol</span> <span style="font-weight:bold">eg5</span> {}
</code></pre></div><p>Go: variables, constants, and functions use one style, and defined types use another.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="font-weight:bold">var</span> eg1 = 1

<span style="font-weight:bold">const</span> eg2 = 1

<span style="font-weight:bold">func</span> eg3() {}

<span style="font-weight:bold">type</span> eg4 <span style="font-weight:bold">struct</span>{}

<span style="font-weight:bold">type</span> eg5 <span style="font-weight:bold">interface</span>{}
</code></pre></div><p>C#: Classes and interfaces use one style, variables, constants, and functions use three different styles.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">int eg1 = 1
const int eg2 = 2
int eg3() {}
class eg4 {}
interface eg5 {}
</code></pre></div><h2 id="language-design-problem-number-two">Language design problem number two</h2>
<p>Once we start developing a project of a certain size, the importance of coding conventions is always repeated. Varying code styles can make it difficult for us to collaborate.</p>
<p><strong>If the specification is so important, should we force it at the language level?</strong></p>
<p>Below I give several different styles of code, and in the absence of a uniform style, we may see the following codes coexist.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="font-weight:bold">if</span> (foo == 0) 
{
  	print(foo)
} 
<span style="font-weight:bold">else</span> <span style="font-weight:bold">if</span> (foo == 1) 
{
  	print(foo)
} 
<span style="font-weight:bold">else</span> 
{
  	print(foo)
}
<span style="font-style:italic">//////////////</span>
<span style="font-weight:bold">if</span> (foo == 0) {
  	print(foo)
} 
<span style="font-weight:bold">else</span> <span style="font-weight:bold">if</span> (foo == 1) {
  	print(foo)
} 
<span style="font-weight:bold">else</span> {
  	print(foo)
}
<span style="font-style:italic">//////////////</span>
<span style="font-weight:bold">if</span> (foo == 0) {
  	print(foo)
} <span style="font-weight:bold">else</span> <span style="font-weight:bold">if</span> (foo == 1) {
  	print(foo)
} <span style="font-weight:bold">else</span> {
  	print(foo)
}

</code></pre></div><p>Of course, one might also write the following.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="font-weight:bold">if</span> (foo == 0) 
		{
    print(foo)
  	} 
<span style="font-weight:bold">else</span> <span style="font-weight:bold">if</span> (foo == 1) 
		{
    print(foo)
  	} 
<span style="font-weight:bold">else</span> 
		{
    	print(foo)
  	}
<span style="font-style:italic">//////////////</span>
<span style="font-weight:bold">if</span> (foo == 0) print(foo)
<span style="font-weight:bold">else</span> <span style="font-weight:bold">if</span> (foo == 1) print(foo)
<span style="font-weight:bold">else</span> print(foo)
</code></pre></div><h2 id="language-design-problem-number-three">Language design problem number three</h2>
<p>Some languages are dynamic and some are static, and they have their own merits, but we try to add static features to dynamic languages (TypeScript) and dynamic features to static languages (Go).</p>
<p><strong>Is there a balance between this static and dynamic solution?</strong></p>
<p>TypeScript: Through an implicit interface, dynamic types are given a type check so that only objects that meet the interface requirements can be used.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="font-weight:bold">interface</span> LabelledValue {
    label: <span style="">string</span>;
}

<span style="font-weight:bold">function</span> printLabel(labelledObj: <span style="">LabelledValue</span>) {
    console.log(labelledObj.label);
}

<span style="font-weight:bold">let</span> myObj = { size: <span style="">10</span>, label: <span style="font-style:italic">&#34;Size 10 Object&#34;</span> };
printLabel(myObj);

</code></pre></div><p>Go: implements a static duck type via an implicit interface, where only objects that meet the function signature requirements are used.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="font-weight:bold">type</span> LabelledValue <span style="font-weight:bold">interface</span> {
	Label() <span style="">string</span>
}

<span style="font-weight:bold">func</span> printLabel(labelledObj LabelledValue) {
	println(labelledObj.Label())
}

<span style="font-weight:bold">type</span> Obj <span style="font-weight:bold">struct</span> {
	size <span style="">int</span>
}

<span style="font-weight:bold">func</span> (this Obj) Label() <span style="">string</span> {
	<span style="font-weight:bold">return</span> <span style="font-style:italic">&#34;Size 10 Object&#34;</span>
}

</code></pre></div><h2 id="language-design-problem-number-four">Language design problem number four</h2>
<p>There are more and less keywords in different languages, but in fact most languages can be Turing-complete.</p>
<p><strong>Do we need a lot of keywords? Or, if there are no keywords, is it okay?</strong></p>
<p>Below are keywords for a language, and some contextual keywords not shown.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">| keyword   |            |           |           |
| --------- | ---------- | --------- | --------- |
| abstract  | as         | base      | bool      |
| break     | byte       | case      | catch     |
| char      | checked    | class     | const     |
| continue  | decimal    | default   | delegate  |
| do        | double     | else      | enum      |
| event     | explicit   | extern    | false     |
| finally   | fixed      | float     | for       |
| foreach   | goto       | if        | implicit  |
| in        | int        | interface | internal  |
| is        | lock       | long      | namespace |
| new       | null       | object    | operator  |
| out       | override   | params    | private   |
| protected | public     | readonly  | ref       |
| return    | sbyte      | sealed    | short     |
| sizeof    | stackalloc | static    | string    |
| struct    | switch     | this      | throw     |
| true      | try        | typeof    | uint      |
| ulong     | unchecked  | unsafe    | ushort    |
| using     | virtual    | void      | volatile  |
| while     |            |           |           |
</code></pre></div><h2 id="key-issues">Key issues</h2>
<p>1 . Do I need more than one syntax for the same function?</p>
<p><strong>We don&rsquo;t need multiple grammars, the same needs can be unified organically.</strong></p>
<p>2 . Is compulsory regulation necessary?</p>
<p><strong>Mandating specifications reduces the stress of code reading and maintenance, and implementing specifications at the language level improves collaboration efficiency for all users.</strong></p>
<p>3 . Do we want a static type or a dynamic type?</p>
<p><strong>We want both static checks and dynamic degrees of freedom. Static duck type might be a solution.</strong></p>
<p>4 . Are keywords necessary?</p>
<p><strong>If the syntax structure is small enough, we can try removing the keyword.</strong></p>
<h2 id="functions">Functions</h2>
<p>Our needs for function syntax can be summarized as follows.</p>
<ul>
<li>Functions are also values, and the way you define a function should be the same as the way you define a function variable.</li>
<li>The type in a function definition should be the same as the type of the function.</li>
<li>Lambda expressions should be remarkably similar to function definitions.</li>
</ul>
<p>Suppose that all our resources are defined using the form <code>let id = XXX</code>, and that values of some type are constructed uniformly using the form <code>type {}</code>.</p>
<p>Then we can start by giving a function syntax like this.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo = func(x: int) int {
    return 1
}
</code></pre></div><p>The syntax is very common, using the <code>func</code> keyword to define types, a formal parameter in <code>()</code>, and a return value after that.</p>
<p>Next we consider that modern function designs often allow multiple return values, so we need to use <code>()</code> to wrap more return values.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo = func(x: int, y: bool) (int, bool) {
    return (1, true)
}
</code></pre></div><p>This is too close to <code>()</code> of the form parameter and return value type, which is difficult to read and requires a separator, so we can introduce <code>-&gt;</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo = func(x: int, y: bool) -&gt; (int, bool) {
    return (1, true)
}
</code></pre></div><p>When <code>-&gt;</code> is added, <code>()-&gt;()</code> can form the type structure of a function, at which point the existence of <code>func</code> is not necessary, so we remove the keyword.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo = (x: int, y: bool) -&gt; (int, bool) {
    return (1, true)
}
</code></pre></div><p>Writing <code>()</code> twice every time is a bit of a pain, but we don&rsquo;t really need two <code>()</code>s. We can combine the formal parameter and return type put them together and split them using <code>-&gt;</code>. By the way, you can also omit the <code>()</code> of <code>return</code> as well.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo = (x: int, y: bool -&gt; int, bool) {
    return 1, true
}
</code></pre></div><p>Wait, do we still need the <code>return</code> keyword? I don&rsquo;t think it&rsquo;s needed, we could use a better looking <code>&lt;-</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo = (x: int, y: bool -&gt; int, bool) {
    &lt;- 1, true
}
</code></pre></div><p>The left and right functions seem a bit unbalanced, we can force the return value types to have the same name description to make them look more consistent. and can also give more user-friendly instructions.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo = (x: int, y: bool -&gt; a: int, b: bool) {
    &lt;- 1, true
}
</code></pre></div><p>Here we have our function descriptions in place, using <code>(-&gt;)</code> to express function types. The Lambda syntax can also be split quite naturally with <code>-&gt;</code>, using <code>{}</code> to define the contents of the entire function.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo: (int, bool -&gt; int, bool) = { x, y -&gt;
    1, true
}
</code></pre></div><p>Example of an unparallel function with function parameters.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo = (-&gt;) {}
let bar = (fn: (-&gt;) -&gt; ) {}
</code></pre></div><h2 id="definitions">Definitions</h2>
<p>Our need for a definition grammar can be summarized as follows.</p>
<ul>
<li>All acts of creating a name are definitions and should be used in the same way.</li>
<li>Names have a higher reading priority than types and should be preceded by the name.</li>
<li>Distinguish between variable and immutable.</li>
</ul>
<p>Suppose we start by defining immutable with <code>let xxx = value</code> and define variable with <code>var xxx = value</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo: int = 0
var bar: int = 0
</code></pre></div><p>Using <code>var</code> is equivalent to one more way of defining declarations, rather than using <code>mut</code> to declare variability, which may have consistency.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">let foo: int = 0
let mut bar: int = 0
</code></pre></div><p>Let&rsquo;s think about the fact that this structure actually holds without the <code>let</code> keyword, so we remove it.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">foo: int = 0
mut bar: int = 0
</code></pre></div><p>Now we are left with the keyword <code>mut</code>, which we also remove and replace it with <code>!</code> instead of it, to denote variability, uncertainty.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">foo: int = 0
!bar: int = 0
</code></pre></div><p>By this point, we don&rsquo;t need to explicitly write the type either, as long as type derivation is supported, and omitting the type allows us to combine it into <code>:=</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">foo := 0
!bar := 0
</code></pre></div><p>Of course, if it doesn&rsquo;t necessarily carry a value, we can also omit the right side and keep the type.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">foo: int
!bar: int
</code></pre></div><p>Now that our definition syntax is complete, replacing the example of the previous function doesn&rsquo;t require changing much of anything.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">foo := (x: int, y: bool -&gt; a: int, b: bool) {
    &lt;- 1, true
}
</code></pre></div><h2 id="select-structure">Select structure</h2>
<p>Existing selection constructs, which generally include both if and switch, are very mature in form and function, but there is potential for further format simplification.</p>
<p>Let&rsquo;s start with a common <code>if</code> statement, and assume that <code>{</code> is not line feedable.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">if (foo == 0) {
    ......
} else if (foo == 1) {
    ......
} else if (foo == 2) {
    ......
} else {
    ......
}
</code></pre></div><p>Removing <code>()</code> doesn&rsquo;t seem to affect anything, so let&rsquo;s remove it first.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">if foo == 0 {
    ......
} else if foo == 1 {
    ......
} else if foo == 2 {
    ......
} else {
    ......
}
</code></pre></div><p>We assume that <code>else if</code> can&rsquo;t be a line break either, it has to be followed by <code>}</code>. With this constraint, we can omit <code>else if</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">if foo == 0 {
    ......
} foo == 1 {
    ......
} foo == 2 {
    ......
} else {
    ......
}
</code></pre></div><p>By the same token, <code>else</code> is not really needed; we can replace it with <code>_</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">if foo == 0 {
    ......
} foo == 1 {
    ......
} foo == 2 {
    ......
} _ {
    ......
}
</code></pre></div><p>Now there is only one <code>if</code> left, we replace it with <code>?</code> for selectivity, replacing it with <code>?</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">? foo == 0 {
    ......
} foo == 1 {
    ......
} foo == 2 {
    ......
} _ {
    ......
}
</code></pre></div><p>Now that we&rsquo;ve completed the basic form of the selection structure, we&rsquo;re compressing more code by forcing the specification.</p>
<p>For <code>switch</code>, the biggest difference from <code>if</code> is that one is a match for a single value and the other is a match for a different value. So obviously we can add syntactic adaptations to what we have now, where <code>[]</code> is used to represent a match to a single target.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">? [foo] 0 {
    ......
} 1 {
    ......
} 2 {
    ......
} _ {
    ......
}
</code></pre></div><p>This gives us two basic select structures.</p>
<h2 id="loop-structure">Loop structure</h2>
<p>Existing loop structures generally contain Foreach, For triplet, and While, but we can also simplify them further in terms of format.</p>
<p>The simplest example is given first.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">for (let i in foo) {
    ......
}
</code></pre></div><p>Omit the less useful `()&rsquo;.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">for let i in foo {
    ......
}
</code></pre></div><p>Both <code>let</code> and <code>in</code> are used to define the object to be retrieved from the set, and we can change the definition syntax to the previous one.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">for i := foo {
    ......
}
</code></pre></div><p>Now there&rsquo;s only <code>for</code> left, and there aren&rsquo;t many symbols available on the keyboard, so I&rsquo;ve replaced it with <code>@</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">@ i := foo {
    ......
}
</code></pre></div><p>This gives us the basic shape of the circular structure.</p>
<p>Let&rsquo;s go back to the traditional three-stage structure.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">for (i := 0; i &lt; 10; i++) {
		......
}
</code></pre></div><p>This structural form is complex, and many new languages have abandoned it in favor of interval operators, mostly of the form <code>begin ... end</code>.</p>
<p>The most commonly used intervals are <strong>increasingly left-closed-right-open</strong>, <strong>increasingly all-closed</strong>, <strong>decreasingly left-closed-right-open</strong>, and <strong>increasingly all-closed</strong>.</p>
<p>So it is sufficient to combine only four forms of interval operators, which are given below in the order in which they are used.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">begin ..&lt; end
begin .. end

begin ..&gt; end
begin ... end
</code></pre></div><p>Now we can use the interval operator for most of the trivial requirements.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">@ i := 0 ..&lt; 10 {
    ......
}
</code></pre></div><p>Finally, passing in an expression directly will satisfy the While requirement.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">@ foo &lt; bar {
    ......
}
</code></pre></div><h2 id="object-templates">Object templates</h2>
<p>A type is a way for us to describe the data and behavior of an object, and we can use it both as a template for constructing data and should be able to think of it as an interface for describing behavior.</p>
<p>This allows us to use it as a static duck type that carries data, behavior, and the ability to impose constraints at the same time.</p>
<p>Suppose we call it a <code>class</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">foo := class {
    label := &#34;I am Label&#34;
    show := (-&gt;) {
        print(label)
    }
}
</code></pre></div><p>foo contains both fields and functions, which can be used consistently.</p>
<p>We can remove the unique keyword <code>class</code> and replace it with another <code>$</code>, which is often used for templates.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">foo := $ {
    label := &#34;I am Label&#34;
    show := (-&gt;) {
        print(label)
    }
}
</code></pre></div><p>Then foo can be treated as a type and we can build it consistently.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">a := foo{}
a.show()
</code></pre></div><p>Based on the properties of the duck type, we can define an interface to the shower to use the behavior of foo.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">shower := $ {
    show: (-&gt;)
}

useShower := (s: shower-&gt;) {
    s.show()
}

useShower(a)
</code></pre></div><p>Since foo has a show method, it can be used naturally as a shower.</p>
<p>We introduce a syntax that automatically implies everything about a type within the object template, which makes it easy to reuse code.</p>
<p>For example, if reader contains a shower, it contains its show.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">reader := $ {
    shower
    read: (-&gt;v: string)
}
</code></pre></div><p>Then we can also make the bar contain foo, which would contain the label and show.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">bar := $ {
    foo

    read := (-&gt;v: string) {
        &lt;- label
    }
}
</code></pre></div><p>At this point we can use the bar as if it were a reader.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">useReader := (r: reader-&gt;) {
    r.show()
    print(r.read())
}

b := bar{}
useReader(b)
</code></pre></div><h2 id="finally">Finally</h2>
<p><a href="https://github.com/kulics-works/feel">Welcome star https://github.com/kulics-works/feel</a></p>
<p>The Feel language is currently experimental and not production ready, and some designs may be released with the llvm side of the Changes due to push, discussion email (<a href="mailto:kulics@outlook.com">kulics@outlook.com</a>) or issue are welcome.</p>
<p>Posting another snippet of leetcode #16 for reference</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">threeSumClosest := (nums: [list int], target: int-&gt;v: int) {
    length := nums.len
    nums.sort()
    !closs := nums[0]+nums[1]+nums[2]
    @ i := 0 ..&lt; length {
        l, r := i+1, length-1
        @ l &lt; r {
            sum := nums[i]+nums[l]+nums[r]
            ? abs(sum-target) &lt; abs(closs-target) {
                closs = sum
            } sum &gt; target {
                r -= 1
            } _ {
                l += 1
            }
        }
    }
    &lt;- closs
}
</code></pre></div>
      </div>

      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yourdiscussshortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
        
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
      <p>Open thinking.</p>
    
     © 2020
    
       · 
       <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
